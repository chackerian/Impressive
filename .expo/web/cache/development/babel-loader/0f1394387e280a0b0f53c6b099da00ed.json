{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/nathanchackerian/Desktop/Impressive/screens/SwipeScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { Component, useState, useEffect, useRef, createRef, setState } from 'react';\nimport Background from \"./Background\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport NavSwipe from \"./NavSwipe\";\nimport CardStack, { Card } from \"./swipe\";\nimport PushyHorizontalMenu from \"./menu/screens/drawers/PushyHorizontalMenu\";\nimport { storage, store } from \"../App.js\";\nimport firebase from 'firebase/app';\nimport { useNavigation } from '@react-navigation/native';\nimport Alerts from \"./Alerts.js\";\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHeart, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nvar SCREEN_HEIGHT = Dimensions.get('window').height;\nvar SCREEN_WIDTH = Dimensions.get('window').width;\nexport default function SwipeScreen(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      images = _useState2[0],\n      setImages = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      swiper = _useState4[0],\n      setSwiper = _useState4[1];\n\n  var _useState5 = useState('black'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shadowColor = _useState6[0],\n      setShadowColor = _useState6[1];\n\n  var _useState7 = useState(createRef()),\n      _useState8 = _slicedToArray(_useState7, 2),\n      slide = _useState8[0],\n      setSlide = _useState8[1];\n\n  var navigation = useNavigation();\n  var alertRef = React.createRef();\n  var styles = StyleSheet.create({\n    image: {\n      opacity: 1,\n      height: 420\n    },\n    info: {\n      padding: 30,\n      color: 'white',\n      fontWeight: \"bold\",\n      backgroundColor: \"#313174\"\n    },\n    description: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      color: 'white',\n      marginLeft: 12\n    },\n    viewport: {\n      height: 250,\n      marginTop: '80%',\n      alignItems: 'center'\n    },\n    button: {\n      width: 50\n    },\n    buttonContainer: {\n      flexDirection: 'row',\n      justifyContent: 'space-evenly'\n    },\n    content: {\n      flex: 5,\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    card: {\n      width: 320,\n      borderRadius: 5,\n      shadowOffset: {\n        width: 2,\n        height: 2\n      },\n      shadowRadius: 30,\n      shadowOpacity: 1\n    },\n    label: {\n      marginLeft: 12,\n      fontSize: 25,\n      color: 'white',\n      fontWeight: 'bold',\n      fontFamily: 'System',\n      backgroundColor: 'transparent'\n    }\n  });\n\n  function cards() {\n    var user, userLikes, userDislikes, interacted, batches, snaps, x, snapshot, images;\n    return _regeneratorRuntime.async(function cards$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(store.collection(\"users\").doc(props.route.params.user.email).get());\n\n          case 2:\n            user = _context.sent;\n            userLikes = user.data().likes || [];\n            userDislikes = user.data().dislikes || [];\n            interacted = userLikes.concat(userDislikes);\n            batches = [];\n\n            while (interacted.length) {\n              batches.push(interacted.splice(0, 10));\n            }\n\n            snaps = [];\n            x = 0;\n\n          case 10:\n            if (!(x < batches.length)) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(store.collection(\"users\").where(\"email\", \"not-in\", batches[x]).get());\n\n          case 13:\n            snapshot = _context.sent;\n            snaps.push(snapshot);\n\n          case 15:\n            x++;\n            _context.next = 10;\n            break;\n\n          case 18:\n            console.log(snaps);\n            images = [];\n            snapshot.docs.forEach(function (s) {\n              images.push(s.data());\n            });\n            console.log(\"IMAGE DATA\", images);\n            setImages(images);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    cards();\n  }, [shadowColor]);\n\n  function addLike(email) {\n    var snapshot, data;\n    return _regeneratorRuntime.async(function addLike$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"ADD LIKE\");\n            store.collection('users').doc(props.route.params.user.email).update({\n              likes: firebase.firestore.FieldValue.arrayUnion(email)\n            });\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(store.collection('users').doc(email).get());\n\n          case 4:\n            snapshot = _context2.sent;\n            data = snapshot.data();\n            console.log(\"PLATFORM\", Platform.OS);\n\n            if (Platform.OS == \"web\") {\n              new alertRef.current.slide();\n              alert(\"web\");\n            } else {\n              Alert.alert(\"New Match\", \"\", [{\n                text: \"Cancel\",\n                onPress: function onPress() {\n                  return console.log(\"Cancel Pressed\");\n                },\n                style: \"cancel\"\n              }, {\n                text: \"Go to Match\",\n                onPress: function onPress() {\n                  return console.log(\"OK Pressed\");\n                }\n              }]);\n            }\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var addDislike = function addDislike(email) {\n    store.collection('users').doc(props.route.params.user.email).update({\n      dislikes: firebase.firestore.FieldValue.arrayUnion(email)\n    });\n  };\n\n  swipeColor = function swipeColor(shadowColor) {\n    setShadowColor(shadowColor);\n    var test = [{\n      name: 'Fake Fake',\n      email: 'fake@fake.com',\n      age: 25,\n      city: \"Fake\",\n      state: \"Fake\",\n      picture: 'https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500'\n    }];\n    setImages(test);\n  };\n\n  return React.createElement(View, {\n    style: styles.body,\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 5\n    }\n  }, React.createElement(PushyHorizontalMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 6\n    }\n  }), React.createElement(Alerts, {\n    ref: alertRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 6\n    }\n  }), React.createElement(NavSwipe, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 6\n    }\n  }), React.createElement(View, {\n    style: styles.viewport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 6\n    }\n  }, React.createElement(CardStack, {\n    style: styles.content,\n    changeShadowColor: function changeShadowColor(shadowColor) {\n      return _this.swipeColor(shadowColor);\n    },\n    ref: function ref(swiper) {\n      setSwiper(swiper);\n    },\n    onSwipeLeft: console.log(\"LEFT\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, images.map(function (i) {\n    var name = i.name.split(\" \")[0];\n    console.log(\"SHADOW RENDER: \", shadowColor);\n    return React.createElement(Card, {\n      style: {\n        width: 320,\n        borderRadius: 5,\n        shadowOffset: {\n          width: 2,\n          height: 2\n        },\n        shadowRadius: 30,\n        shadowOpacity: 1,\n        shadowColor: shadowColor\n      },\n      key: i.name,\n      color: \"red\",\n      onSwipedRight: function onSwipedRight(event) {\n        return addLike(i.email);\n      },\n      onSwipedLeft: function onSwipedLeft(event) {\n        return addDislike(i.email);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: i.picture\n      },\n      style: styles.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.info,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: styles.label,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 14\n      }\n    }, name, \", \", i.age), React.createElement(Text, {\n      style: styles.description,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 14\n      }\n    }, i.city, \", \", i.state)));\n  }))), React.createElement(View, {\n    style: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: [styles.button],\n    onPress: function onPress() {\n      swiper.swipeLeft();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faTimesCircle,\n    color: '#ff2400',\n    size: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: [styles.button],\n    onPress: function onPress() {\n      swiper.swipeRight();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    color: '#02ff02',\n    size: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/nathanchackerian/Desktop/Impressive/screens/SwipeScreen.js"],"names":["React","Component","useState","useEffect","useRef","createRef","setState","Background","NavSwipe","CardStack","Card","PushyHorizontalMenu","storage","store","firebase","useNavigation","Alerts","FontAwesomeIcon","faHeart","faTimesCircle","SCREEN_HEIGHT","Dimensions","get","height","SCREEN_WIDTH","width","SwipeScreen","props","images","setImages","swiper","setSwiper","shadowColor","setShadowColor","slide","setSlide","navigation","alertRef","styles","StyleSheet","create","image","opacity","info","padding","color","fontWeight","backgroundColor","description","fontSize","marginLeft","viewport","marginTop","alignItems","button","buttonContainer","flexDirection","justifyContent","content","flex","card","borderRadius","shadowOffset","shadowRadius","shadowOpacity","label","fontFamily","cards","collection","doc","route","params","user","email","userLikes","data","likes","userDislikes","dislikes","interacted","concat","batches","length","push","splice","snaps","x","where","snapshot","console","log","docs","forEach","s","addLike","update","firestore","FieldValue","arrayUnion","Platform","OS","current","alert","Alert","text","onPress","style","addDislike","swipeColor","test","name","age","city","state","picture","body","map","i","split","event","uri","swipeLeft","swipeRight"],"mappings":"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","sourcesContent":["import React, {Component, useState, useEffect, useRef, createRef, setState} from 'react'\nimport Background from './Background'\nimport {StyleSheet, Image, TextInput, Text, View, Platform, Dimensions, PanResponder, Animated, TouchableOpacity, Alert } from 'react-native';\nimport NavSwipe from './NavSwipe';\n\nimport CardStack, { Card } from './swipe';\nimport PushyHorizontalMenu from './menu/screens/drawers/PushyHorizontalMenu';\n\nimport { storage, store } from \"../App.js\";\nimport firebase from 'firebase/app';\n// import './nobounce.js'\nimport { useNavigation } from '@react-navigation/native';\nimport Alerts from './Alerts.js';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHeart, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\n\nconst SCREEN_HEIGHT = Dimensions.get('window').height\nconst SCREEN_WIDTH = Dimensions.get('window').width\n\nexport default function SwipeScreen(props) {\n\n  const [images, setImages] = useState([]);\n  const [swiper, setSwiper] = useState();\n  const [shadowColor, setShadowColor] = useState('black');\n  const [slide, setSlide] = useState(createRef());\n  const navigation = useNavigation();\n  const alertRef = React.createRef();\n\n  const styles = StyleSheet.create({\n    image: {\n      opacity: 1,\n      height: 420,\n    },\n    info: {\n      padding: 30,\n      color: 'white',\n      fontWeight: \"bold\",\n      backgroundColor: \"#313174\",\n    },\n    description: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      color: 'white',\n      marginLeft: 12,\n    },\n    viewport: {\n      height: 250,\n      marginTop: '80%',\n      alignItems: 'center',\n    },\n    button: {\n      width: 50,\n    },\n    buttonContainer:{\n      flexDirection:'row',\n      justifyContent: 'space-evenly',\n    },\n    content:{\n      flex: 5,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    card:{\n      width: 320,\n      borderRadius: 5,\n      shadowOffset: {width: 2, height: 2},\n      shadowRadius: 30,\n      shadowOpacity: 1,\n    },\n    label: {\n      marginLeft: 12,\n      fontSize: 25,\n      color: 'white',\n      fontWeight: 'bold',\n      fontFamily: 'System',\n      backgroundColor: 'transparent',\n    },\n  })\n\n  async function cards(){\n    const user = await store.collection(\"users\").doc(props.route.params.user.email).get()\n    const userLikes = user.data().likes || []\n    const userDislikes = user.data().dislikes || []\n\n    var interacted = userLikes.concat(userDislikes)\n    var batches = [];\n\n  //   while(interacted.length) {\n  //     const batch = interacted.splice(0, 10);\n\n  //   batches.push(\n  //     store.collection(\"users\")\n  //       .where(\n  //         \"email\",\n  //         'not-in',\n  //         [...batch]\n  //       )\n  //       .get()\n  //       .then(results => results.docs.map(result => ({ /* id: result.id, */ ...result.data() }) ))\n  //   )\n\n  // // after all of the data is fetched, return it\n  // return Promise.all(batches)\n  //   .then(content => content.flat());\n\n    while(interacted.length) {\n      batches.push(interacted.splice(0, 10));\n    }\n\n    var snaps = []\n    for(var x=0; x<batches.length; x++){\n      var snapshot = await store.collection(\"users\").where(\"email\", \"not-in\", batches[x]).get()\n      snaps.push(snapshot);\n    }\n  // }\n\n    console.log(snaps)\n\n    const images = [];\n\n    snapshot.docs.forEach((s) => {\n      images.push(s.data());\n    });\n    console.log(\"IMAGE DATA\", images)\n    setImages(images);\n\n  }\n  \n  useEffect(() => {\n    cards()\n  }, [shadowColor])\n\n  async function addLike(email){\n\n    console.log(\"ADD LIKE\")\n\n    store.collection('users').doc(props.route.params.user.email).update({\n      likes: firebase.firestore.FieldValue.arrayUnion(email)\n    })\n\n    const snapshot = await store.collection('users').doc(email).get();\n    const data = snapshot.data();\n\n    console.log(\"PLATFORM\", Platform.OS)\n\n    if (Platform.OS == \"web\") {\n      new alertRef.current.slide()\n      alert(\"web\")\n    } else {\n\n    Alert.alert(\n      \"New Match\",\n      \"\",\n      [\n        {\n          text: \"Cancel\",\n          onPress: () => console.log(\"Cancel Pressed\"),\n          style: \"cancel\"\n        },\n        { text: \"Go to Match\", onPress: () => console.log(\"OK Pressed\") }\n      ]\n    );\n\n    }\n\n     // Create convo\n\n  }\n\n  var addDislike = function(email){\n    store.collection('users').doc(props.route.params.user.email).update({\n      dislikes: firebase.firestore.FieldValue.arrayUnion(email)\n    })\n  }\n\n  swipeColor = (shadowColor) => {\n    // force a re-render\n    setShadowColor(shadowColor);\n    var test = [{name: 'Fake Fake', email: 'fake@fake.com', age: 25, city: \"Fake\", state: \"Fake\", picture: 'https://images.pexels.com/photos/674010/pexels-photo-674010.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500' }]\n    setImages(test)\n  };\n\n  return (\n    <View style={styles.body} id=\"main\">\n     <PushyHorizontalMenu />\n     <Alerts ref={alertRef}/>\n     <NavSwipe />\n     <View style={styles.viewport}>\n      <CardStack \n        style={styles.content}\n        changeShadowColor={shadowColor => this.swipeColor(shadowColor)}\n        ref={swiper => { setSwiper(swiper) }}\n        onSwipeLeft={console.log(\"LEFT\")}\n      >\n       {images.map((i) => {\n        var name = i.name.split(\" \")[0]\n        console.log(\"SHADOW RENDER: \", shadowColor)\n        return (\n          <Card style={{width: 320,\n                        borderRadius: 5,\n                        shadowOffset: {width: 2, height: 2},\n                        shadowRadius: 30,\n                        shadowOpacity: 1,\n                        shadowColor: shadowColor,\n                      }} \n            key={i.name} \n            color='red'\n            onSwipedRight={(event) => addLike(i.email)} \n            onSwipedLeft={(event) => addDislike(i.email)}\n          >\n            <Image source={{uri: i.picture}} style={styles.image} />\n            <View style={styles.info}> \n             <Text style={styles.label}>{name}, {i.age}</Text>\n             <Text style={styles.description}>{i.city}, {i.state}</Text>\n            </View>\n          </Card>\n          )\n        })}\n      </CardStack>\n     </View>\n      <View style={styles.buttonContainer}>\n        <TouchableOpacity style={[styles.button]} onPress={() => {\n          swiper.swipeLeft();\n        }}>\n          <FontAwesomeIcon icon={ faTimesCircle } color={ '#ff2400' } size={ 40 } />\n        </TouchableOpacity>\n        <TouchableOpacity style={[styles.button]} onPress={() => {\n          swiper.swipeRight();\n        }}>\n          <FontAwesomeIcon icon={ faHeart } color={ '#02ff02' } size={ 40 } />\n        </TouchableOpacity>\n      </View>\n    </View>\n  )\n}"]},"metadata":{},"sourceType":"module"}