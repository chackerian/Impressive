{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/nathanchackerian/Desktop/Impressive/screens/SwipeScreen.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, useState, useEffect, useRef, createRef, setState, ReactNode } from 'react';\nimport Background from \"./Background\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport { Slider } from \"@miblanchard/react-native-slider\";\nimport NavSwipe from \"./NavSwipe\";\nimport CardStack, { Card } from \"./swipe\";\nimport { storage, store } from \"../App.js\";\nimport firebase from 'firebase/app';\nimport { useNavigation } from '@react-navigation/native';\nimport Drawer from 'react-native-drawer';\nimport Alerts from \"./Alerts.js\";\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHeart, faTimesCircle, faSlidersH } from '@fortawesome/free-solid-svg-icons';\nvar SCREEN_HEIGHT = Dimensions.get('window').height;\nvar SCREEN_WIDTH = Dimensions.get('window').width;\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: 'stretch',\n    justifyContent: 'flex-start',\n    margin: 16,\n    paddingBottom: 32\n  },\n  sliderContainer: {\n    paddingVertical: 16\n  },\n  titleContainer: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nvar DEFAULT_VALUE = 0;\n\nvar SliderContainer = function SliderContainer(props) {\n  var caption = props.caption,\n      sliderValue = props.sliderValue,\n      trackMarks = props.trackMarks;\n\n  var _useState = useState(sliderValue ? sliderValue : DEFAULT_VALUE),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var renderTrackMarkComponent;\n\n  var renderChildren = function renderChildren() {\n    return React.Children.map(props.children, function (child) {\n      if (!!child && child.type === Slider) {\n        return React.cloneElement(child, {\n          onValueChange: setValue,\n          value: value\n        });\n      }\n\n      return child;\n    });\n  };\n\n  return React.createElement(View, {\n    style: styles.sliderContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.titleContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, caption), React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, Array.isArray(value) ? value.join(' - ') : value)), renderChildren());\n};\n\nvar ControlPanel = function (_Component) {\n  _inherits(ControlPanel, _Component);\n\n  var _super = _createSuper(ControlPanel);\n\n  function ControlPanel() {\n    var _this2;\n\n    _classCallCheck(this, ControlPanel);\n\n    _this2 = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this2), \"toggleSwitch\", function (value) {\n      _this2.setState({\n        switchValue: value\n      });\n    });\n\n    _this2.state = {\n      switchValue: \"false\"\n    };\n    return _this2;\n  }\n\n  _createClass(ControlPanel, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }\n      }, React.createElement(SafeAreaView, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.titleContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }\n      }, \"Filters\"), React.createElement(View, {\n        contentContainerStyle: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, React.createElement(SliderContainer, {\n        caption: \"Miles Away\",\n        sliderValue: [1],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }\n      }, React.createElement(Slider, {\n        maximumValue: 25,\n        minimumValue: 0,\n        step: 1,\n        minimumTrackTintColor: \"blue\",\n        thumbTintColor: \"blue\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      })), React.createElement(SliderContainer, {\n        caption: \"Age\",\n        sliderValue: [18, 60],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      }, React.createElement(Slider, {\n        animateTransitions: true,\n        maximumTrackTintColor: \"blue\",\n        maximumValue: 60,\n        minimumTrackTintColor: \"blue\",\n        minimumValue: 18,\n        step: 2,\n        thumbTintColor: \"blue\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 19\n        }\n      }))), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.titleContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }\n      }, \"Interests\"), React.createElement(Switch, {\n        style: {\n          marginTop: 30\n        },\n        onValueChange: this.toggleSwitch,\n        value: this.state.switchValue,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }))), React.createElement(Button, {\n        onPress: function onPress() {\n          _this3.props.closeDrawer();\n        },\n        title: \"Back to Swipe\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return ControlPanel;\n}(Component);\n\nexport default function SwipeScreen(props) {\n  var _this4 = this;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      images = _useState4[0],\n      setImages = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      swiper = _useState6[0],\n      setSwiper = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      drawer = _useState8[0],\n      setDrawer = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      shadowColor = _useState10[0],\n      setShadowColor = _useState10[1];\n\n  var _useState11 = useState(createRef()),\n      _useState12 = _slicedToArray(_useState11, 2),\n      slide = _useState12[0],\n      setSlide = _useState12[1];\n\n  var navigation = useNavigation();\n  var alertRef = React.createRef();\n  var styles = StyleSheet.create({\n    image: {\n      opacity: 1,\n      height: 420\n    },\n    info: {\n      padding: 20,\n      color: 'white',\n      fontWeight: \"bold\",\n      backgroundColor: \"#313174\"\n    },\n    description: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      color: 'white',\n      marginLeft: 12\n    },\n    viewport: {\n      height: 250,\n      marginTop: 200,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      alignItems: 'center'\n    },\n    button: {\n      padding: 30\n    },\n    container: {\n      flex: 1,\n      flexDirection: 'column'\n    },\n    buttonContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    content: {\n      flex: 5,\n      marginTop: 200,\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    card: {\n      width: 320,\n      borderRadius: 5,\n      shadowColor: 'rgba(0,0,0,0.5)',\n      shadowOffset: {\n        width: 0,\n        height: 1\n      },\n      shadowOpacity: 0.5\n    },\n    label: {\n      marginLeft: 12,\n      fontSize: 25,\n      color: 'white',\n      fontWeight: 'bold',\n      fontFamily: 'System',\n      backgroundColor: 'transparent'\n    },\n    topNav: {\n      backgroundColor: 'rgb(12,0,51)',\n      position: 'absolute',\n      height: '10%',\n      top: 0,\n      width: 100 + '%'\n    },\n    slider: {\n      paddingTop: 70,\n      paddingRight: 20,\n      alignItems: \"flex-end\"\n    },\n    text: {\n      color: 'rgb(255,255,255)',\n      alignSelf: 'center',\n      fontSize: 30\n    }\n  });\n\n  function cards() {\n    return _cards.apply(this, arguments);\n  }\n\n  function _cards() {\n    _cards = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n      var user, userLikes, userDislikes, interacted, batches, snaps, snapshot, images;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return store.collection(\"users\").doc(props.route.params.user.email).get();\n\n            case 2:\n              user = _context.sent;\n              userLikes = user.data().likes || [];\n              userDislikes = user.data().dislikes || [];\n              interacted = userLikes.concat(userDislikes);\n              batches = [];\n              interacted.push(\"A\");\n              batches.push(interacted.slice(0, 10));\n              console.log(\"BATCHES\", batches, \"INTERACTED\", interacted);\n              snaps = [];\n              _context.next = 13;\n              return store.collection(\"users\").where(\"email\", \"not-in\", interacted).get();\n\n            case 13:\n              snapshot = _context.sent;\n              console.log(\"SNAPSHOT\", snapshot);\n              snaps.push(snapshot);\n              console.log('SNAPS', snaps);\n              images = [];\n              snapshot.docs.forEach(function (s) {\n                images.push(s.data());\n              });\n              setImages(images);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _cards.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    cards();\n  }, []);\n\n  function addLike(_x) {\n    return _addLike.apply(this, arguments);\n  }\n\n  function _addLike() {\n    _addLike = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(email) {\n      var snapshot, data, likes, liked, alert;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              store.collection('users').doc(props.route.params.user.email).update({\n                likes: firebase.firestore.FieldValue.arrayUnion(email)\n              });\n              _context2.next = 3;\n              return store.collection('users').doc(email).get();\n\n            case 3:\n              snapshot = _context2.sent;\n              data = snapshot.data();\n              likes = data.likes;\n              console.log(\"SWIPE LIKE\", data.likes);\n              liked = {\n                name: data.name,\n                email: email\n              };\n\n              if (likes.includes(props.route.params.user.email)) {\n                store.collection('users').doc(props.route.params.user.email).update({\n                  matches: firebase.firestore.FieldValue.arrayUnion(liked)\n                });\n\n                if (Platform.OS == \"web\") {\n                  alert = new Alerts().slide();\n                  console.log(\"SLIDE\", alert);\n                } else {\n                  Alert.alert(\"New Match\", \"\", [{\n                    text: \"Cancel\",\n                    onPress: function onPress() {\n                      return console.log(\"Cancel Pressed\");\n                    },\n                    style: \"cancel\"\n                  }, {\n                    text: \"Go to match\",\n                    onPress: function onPress() {\n                      return navigation.navigate('Messages');\n                    }\n                  }]);\n                }\n              }\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _addLike.apply(this, arguments);\n  }\n\n  var addDislike = function addDislike(email) {\n    store.collection('users').doc(props.route.params.user.email).update({\n      dislikes: firebase.firestore.FieldValue.arrayUnion(email)\n    });\n  };\n\n  var changeShadow = function changeShadow(a) {\n    setShadowColor('red');\n  };\n\n  var closeFilter = function closeFilter() {\n    drawer.close();\n  };\n\n  var openFilter = function openFilter() {\n    console.log(\"OPEN\");\n    drawer.open();\n  };\n\n  return React.createElement(Drawer, {\n    ref: function ref(_ref) {\n      return setDrawer(_ref);\n    },\n    content: React.createElement(ControlPanel, {\n      closeDrawer: closeFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 16\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.body,\n    id: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 5\n    }\n  }, React.createElement(Alerts, {\n    ref: alertRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 6\n    }\n  }), React.createElement(View, {\n    style: styles.topNav,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }\n  }, React.createElement(StatusBar, {\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    style: styles.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 11\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.slider,\n    onPress: function onPress() {\n      openFilter();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 11\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faSlidersH,\n    size: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 15\n    }\n  }))), React.createElement(View, {\n    style: styles.viewport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 6\n    }\n  }, React.createElement(CardStack, {\n    style: styles.content,\n    ref: function ref(swiper) {\n      setSwiper(swiper);\n    },\n    onSwipeLeft: console.log(\"LEFT\"),\n    changeShadowColor: function changeShadowColor(color) {\n      changeShadow(color);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }\n  }, images.map(function (i) {\n    var name = i.name.split(\" \")[0];\n    return React.createElement(Card, {\n      style: [styles.card, styles.card1],\n      key: i.name,\n      onSwipedRight: function onSwipedRight(event) {\n        return addLike(i.email);\n      },\n      onSwipedLeft: function onSwipedLeft(event) {\n        return addDislike(i.email);\n      },\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: i.picture\n      },\n      style: styles.image,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }\n    }), React.createElement(View, {\n      style: styles.info,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: styles.label,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 14\n      }\n    }, name, \", \", i.age), React.createElement(Text, {\n      style: styles.description,\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 14\n      }\n    }, i.city, \", \", i.state)));\n  }))), React.createElement(View, {\n    style: styles.buttonContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: [styles.button],\n    onPress: function onPress() {\n      swiper.swipeLeft();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 9\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faTimesCircle,\n    color: '#ff2400',\n    size: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 11\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: [styles.button],\n    onPress: function onPress() {\n      swiper.swipeRight();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    color: '#02ff02',\n    size: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 11\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/nathanchackerian/Desktop/Impressive/screens/SwipeScreen.js"],"names":["React","Component","useState","useEffect","useRef","createRef","setState","ReactNode","Background","Slider","NavSwipe","CardStack","Card","storage","store","firebase","useNavigation","Drawer","Alerts","FontAwesomeIcon","faHeart","faTimesCircle","faSlidersH","SCREEN_HEIGHT","Dimensions","get","height","SCREEN_WIDTH","width","styles","StyleSheet","create","container","alignItems","justifyContent","margin","paddingBottom","sliderContainer","paddingVertical","titleContainer","DEFAULT_VALUE","SliderContainer","props","caption","sliderValue","trackMarks","value","setValue","renderTrackMarkComponent","renderChildren","Children","map","children","child","type","cloneElement","onValueChange","Array","isArray","join","ControlPanel","switchValue","state","marginTop","toggleSwitch","closeDrawer","SwipeScreen","images","setImages","swiper","setSwiper","drawer","setDrawer","shadowColor","setShadowColor","slide","setSlide","navigation","alertRef","image","opacity","info","padding","color","fontWeight","backgroundColor","description","fontSize","marginLeft","viewport","marginRight","button","flex","flexDirection","buttonContainer","content","card","borderRadius","shadowOffset","shadowOpacity","label","fontFamily","topNav","position","top","slider","paddingTop","paddingRight","text","alignSelf","cards","collection","doc","route","params","user","email","userLikes","data","likes","userDislikes","dislikes","interacted","concat","batches","push","slice","console","log","snaps","where","snapshot","docs","forEach","s","addLike","update","firestore","FieldValue","arrayUnion","liked","name","includes","matches","Platform","OS","alert","Alert","onPress","style","navigate","addDislike","changeShadow","a","closeFilter","close","openFilter","open","ref","body","i","split","card1","event","uri","picture","age","city","swipeLeft","swipeRight"],"mappings":"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","sourcesContent":["import React, {Component, useState, useEffect, useRef, createRef, setState, ReactNode} from 'react'\nimport Background from './Background'\nimport {StyleSheet, SafeAreaView, ScrollView, StatusBar, Image, TextInput, Text, View, Platform, Dimensions, PanResponder, Animated, TouchableOpacity, Alert, Button, Switch } from 'react-native';\nimport { Slider } from \"@miblanchard/react-native-slider\";\nimport NavSwipe from './NavSwipe';\nimport CardStack, { Card } from './swipe';\nimport { storage, store } from \"../App.js\";\nimport firebase from 'firebase/app';\n// import './nobounce.js'\nimport { useNavigation } from '@react-navigation/native';\n\nimport Drawer from 'react-native-drawer';\nimport Alerts from './Alerts.js';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHeart, faTimesCircle, faSlidersH } from '@fortawesome/free-solid-svg-icons';\n\nconst SCREEN_HEIGHT = Dimensions.get('window').height\nconst SCREEN_WIDTH = Dimensions.get('window').width\n\nconst styles = StyleSheet.create({\n    container: {\n        alignItems: 'stretch',\n        justifyContent: 'flex-start',\n        margin: 16,\n        paddingBottom: 32,\n    },\n    sliderContainer: {\n        paddingVertical: 16,\n    },\n    titleContainer: {\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n});\n\nconst DEFAULT_VALUE = 0;\n\nconst SliderContainer = (props: {\n    caption: string;\n    children: React.ReactElement;\n    sliderValue?: Array<number>;\n}) => {\n    const {caption, sliderValue, trackMarks} = props;\n    const [value, setValue] = useState(\n        sliderValue ? sliderValue : DEFAULT_VALUE,\n    );\n    let renderTrackMarkComponent: ReactNode;\n\n    const renderChildren = () => {\n        return React.Children.map(\n            props.children,\n            (child: React.ReactElement) => {\n                if (!!child && child.type === Slider) {\n                    return React.cloneElement(child, {\n                        onValueChange: setValue,\n                        value,\n                    });\n                }\n\n                return child;\n            },\n        );\n    };\n\n    return (\n        <View style={styles.sliderContainer}>\n            <View style={styles.titleContainer}>\n                <Text>{caption}</Text>\n                <Text>{Array.isArray(value) ? value.join(' - ') : value}</Text>\n            </View>\n            {renderChildren()}\n        </View>\n    );\n};\n\nclass ControlPanel extends Component {\n\n  constructor() {\n    super();\n    this.state = {switchValue: \"false\"};\n  }\n\n  toggleSwitch = value => {\n    this.setState({ switchValue: value });\n  };\n\n  render() {\n    return (\n      <View>\n        <SafeAreaView style={styles.container}>\n          <Text style={styles.titleContainer}>\n            Filters\n          </Text>\n          <View contentContainerStyle={styles.container}>\n              <SliderContainer\n                  caption=\"Miles Away\"\n                  sliderValue={[1]}>\n                  <Slider maximumValue={25}\n                      minimumValue={0}\n                      step={1}\n                      minimumTrackTintColor=\"blue\"\n                      thumbTintColor=\"blue\" \n                  />\n              </SliderContainer>\n              <SliderContainer\n                  caption=\"Age\"\n                  sliderValue={[18, 60]}>\n                  <Slider\n                      animateTransitions\n                      maximumTrackTintColor=\"blue\"\n                      maximumValue={60}\n                      minimumTrackTintColor=\"blue\"\n                      minimumValue={18}\n                      step={2}\n                      thumbTintColor=\"blue\"\n                  />\n              </SliderContainer>\n          </View>\n          <View>\n            <Text style={styles.titleContainer}>Interests</Text>\n            <Switch\n              style={{ marginTop: 30 }}\n              onValueChange={this.toggleSwitch}\n              value={this.state.switchValue}\n            />\n          </View>\n        </SafeAreaView>\n\n        <Button\n          onPress={() => {\n            this.props.closeDrawer();\n          }}\n          title=\"Back to Swipe\"\n        />\n      </View>\n    )\n  }\n}\n\nexport default function SwipeScreen(props) {\n\n  const [images, setImages] = useState([]);\n  const [swiper, setSwiper] = useState();\n  const [drawer, setDrawer] = useState();\n  const [shadowColor, setShadowColor] = useState(\"\");\n  const [slide, setSlide] = useState(createRef());\n  const navigation = useNavigation();\n  const alertRef = React.createRef();\n\n  const styles = StyleSheet.create({\n    image: {\n      opacity: 1,\n      height: 420,\n    },\n    info: {\n      padding: 20,\n      color: 'white',\n      fontWeight: \"bold\",\n      backgroundColor: \"#313174\",\n    },\n    description: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      color: 'white',\n      marginLeft: 12,\n    },\n    viewport: {\n      height: 250,\n      marginTop: 200,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      alignItems: 'center',\n    },\n    button: {\n      padding: 30,\n    },\n    container: {\n      flex: 1,\n      flexDirection: 'column',\n    },\n    buttonContainer:{\n      flexDirection:'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    content:{\n      flex: 5,\n      marginTop: 200,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    card:{\n      width: 320,\n      borderRadius: 5,\n      shadowColor: 'rgba(0,0,0,0.5)',\n      shadowOffset: {\n        width: 0,\n        height: 1\n      },\n      shadowOpacity:0.5,\n    },\n    label: {\n      marginLeft: 12,\n      fontSize: 25,\n      color: 'white',\n      fontWeight: 'bold',\n      fontFamily: 'System',\n      backgroundColor: 'transparent',\n    },\n    topNav: {\n        backgroundColor:'rgb(12,0,51)',\n        position:'absolute',\n        height: '10%',\n        top:0,\n        width:100+'%'\n    },\n    slider: {\n        paddingTop: 70,\n        paddingRight: 20,\n        alignItems: \"flex-end\",\n    },\n    text:{\n        color:'rgb(255,255,255)',\n        alignSelf: 'center',\n        fontSize: 30\n    },\n  })\n\n  async function cards(){\n    const user = await store.collection(\"users\").doc(props.route.params.user.email).get()\n    const userLikes = user.data().likes || []\n    const userDislikes = user.data().dislikes || []\n\n    var interacted = userLikes.concat(userDislikes)\n    var batches = [];\n\n    interacted.push(\"A\")\n    batches.push(interacted.slice(0, 10));\n\n    console.log(\"BATCHES\", batches, \"INTERACTED\", interacted)\n\n    var snaps = []\n    var snapshot = await store.collection(\"users\").where(\"email\", \"not-in\", interacted).get()\n    console.log(\"SNAPSHOT\", snapshot)\n    snaps.push(snapshot);\n\n    console.log('SNAPS', snaps)\n\n    const images = [];\n\n    snapshot.docs.forEach((s) => {\n      images.push(s.data());\n    });\n    setImages(images);\n\n  }\n  \n  useEffect(() => {\n    cards()\n  }, [])\n\n  async function addLike(email){\n\n    store.collection('users').doc(props.route.params.user.email).update({\n      likes: firebase.firestore.FieldValue.arrayUnion(email)\n    })\n\n    const snapshot = await store.collection('users').doc(email).get();\n    const data = snapshot.data();\n    var likes = data.likes\n\n    console.log(\"SWIPE LIKE\", data.likes)\n\n    var liked = {name: data.name, email: email}\n    if(likes.includes(props.route.params.user.email)){\n\n           store.collection('users').doc(props.route.params.user.email).update({\n              matches: firebase.firestore.FieldValue.arrayUnion(liked)\n          })\n\n          if (Platform.OS == \"web\") {\n            var alert = new Alerts().slide()\n            console.log(\"SLIDE\", alert)\n          } else {\n\n            Alert.alert(\n              \"New Match\",\n              \"\",\n              [\n                {\n                  text: \"Cancel\",\n                  onPress: () => console.log(\"Cancel Pressed\"),\n                  style: \"cancel\"\n                },\n                { text: \"Go to match\", onPress: () => navigation.navigate('Messages') }\n              ]\n            );\n\n          }\n\n    }\n\n  }\n\n  var addDislike = function(email){\n    store.collection('users').doc(props.route.params.user.email).update({\n      dislikes: firebase.firestore.FieldValue.arrayUnion(email)\n    })\n  }\n\n  var changeShadow = function(a){\n    setShadowColor('red')\n  }\n\n  const closeFilter = () =>  {\n    drawer.close()\n  };\n\n  const openFilter = () =>  {\n    console.log(\"OPEN\")\n    drawer.open()\n  };\n\n  return (\n    <Drawer\n      ref={(ref) => setDrawer(ref)}\n      content={<ControlPanel closeDrawer={closeFilter} />}\n    >\n    <View style={styles.body} id=\"main\">\n     <Alerts ref={alertRef}/>\n      <View style={styles.topNav}>\n          <StatusBar barStyle=\"light-content\"/>\n          <Text style={styles.text}></Text>\n          <TouchableOpacity style={styles.slider} onPress={() => { openFilter() }}>\n              <FontAwesomeIcon icon={ faSlidersH } size={ 30 } />\n          </TouchableOpacity> \n      </View>\n     <View style={styles.viewport}>\n      <CardStack \n        style={styles.content}\n        ref={swiper => { setSwiper(swiper) }}\n        onSwipeLeft={console.log(\"LEFT\")}\n        changeShadowColor={color => { changeShadow(color)} }\n      >\n       {images.map((i) => {\n        var name = i.name.split(\" \")[0]\n        return (\n          <Card style={[styles.card, styles.card1]} key={i.name} \n            onSwipedRight={(event) => addLike(i.email)} \n            onSwipedLeft={(event) => addDislike(i.email)}\n          >\n            <Image source={{uri: i.picture}} style={styles.image} />\n            <View style={styles.info}> \n             <Text style={styles.label}>{name}, {i.age}</Text>\n             <Text style={styles.description}>{i.city}, {i.state}</Text>\n            </View>\n          </Card>\n          )\n        })}\n      </CardStack>\n     </View>\n      <View style={styles.buttonContainer}>\n        <TouchableOpacity style={[styles.button]} onPress={() => {\n          swiper.swipeLeft();\n        }}>\n          <FontAwesomeIcon icon={ faTimesCircle } color={ '#ff2400' } size={ 40 } />\n        </TouchableOpacity>\n        <TouchableOpacity style={[styles.button]} onPress={() => {\n          swiper.swipeRight();\n        }}>\n          <FontAwesomeIcon icon={ faHeart } color={ '#02ff02' } size={ 40 } />\n        </TouchableOpacity>\n      </View>\n    </View>\n  </Drawer>\n  )\n}"]},"metadata":{},"sourceType":"module"}